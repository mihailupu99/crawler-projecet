<!-- app/web/templates/partials/compare_list.html -->
{% if posts and posts|length > 0 %}
<div class="space-y-6">
  {% for a in posts %}
  <article class="bg-white rounded-2xl border shadow-sm overflow-hidden">
    <header class="p-4 border-b">
      <h3 class="font-semibold leading-snug">{{ a.title }}</h3>
      <div class="text-sm text-gray-500">
        <span>{{ a.date }}</span>
        {% if a.paragraphs_count %} ·
        <span>{{ a.paragraphs_count }} par.</span>{% endif %} ·
        <a
          href="{{ a.url }}"
          target="_blank"
          rel="noopener"
          class="text-indigo-600 hover:text-indigo-700"
          >Source</a
        >
      </div>
    </header>

    <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Original (left) -->
      <section class="space-y-3">
        <div class="px-1 py-1 text-xs uppercase tracking-wide text-gray-500">
          Original
        </div>
        {% set img = a.local_image_web or a.image_url %} {% if img %}
        <img
          src="{{ img }}"
          alt=""
          class="w-full rounded-lg object-contain max-h-80"
        />
        {% else %}
        <div
          class="h-40 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400"
        >
          no image
        </div>
        {% endif %} {% if a.original_text %}
        <pre
          class="text-sm whitespace-pre-wrap leading-relaxed max-h-64 overflow-auto"
        >
{{ a.original_text }}</pre
        >
        {% else %}
        <div class="text-sm text-gray-500">no text</div>
        {% endif %}
      </section>

      <!-- Generated (right) -->
      <section class="space-y-3">
        <div class="flex items-center justify-between">
          <div class="text-xs uppercase tracking-wide text-gray-500">
            Generated
          </div>
          <div class="flex gap-2">
            <button
              class="px-2 py-1 rounded-md border text-xs text-gray-400 cursor-not-allowed"
              disabled
            >
              Image → Text
            </button>
            <button
              class="px-2 py-1 rounded-md border text-xs text-gray-400 cursor-not-allowed"
              disabled
            >
              Text → Image
            </button>
          </div>
        </div>

        {% if a.generated_image_web %}
        <img
          src="{{ a.generated_image_web }}"
          alt=""
          class="w-full rounded-lg object-contain max-h-80"
        />
        <div class="text-xs text-gray-500">Model: {{ a.gen_img_model }}</div>

        {% if a.generated_text %}
        <pre
          class="text-sm whitespace-pre-wrap bg-gray-50 rounded-lg p-3 max-h-64 overflow-auto"
        >
{{ a.generated_text }}</pre
        >
        <div class="text-xs text-gray-500">Model: {{ a.gen_text_model }}</div>
        {% else %}
        <div class="text-sm text-gray-500">No generated text yet.</div>
        {% endif %} {% else %}
        <div class="text-sm text-gray-500">No generated image yet.</div>

        {% if a.generated_text %}
        <pre
          class="text-sm whitespace-pre-wrap bg-gray-50 rounded-lg p-3 max-h-64 overflow-auto"
        >
{{ a.generated_text }}</pre
        >
        <div class="text-xs text-gray-500">Model: {{ a.gen_text_model }}</div>
        {% else %}
        <div class="text-sm text-gray-500">No generated text yet.</div>
        {% endif %} {% endif %} {% if not a.generated_text and not
        a.generated_image_web %}
        <div class="text-xs text-gray-400">{{ a.gen_status }}</div>
        {% endif %}
      </section>
    </div>
  </article>
  {% endfor %}
</div>
{% else %}
<div class="text-gray-500">No items to compare yet.</div>
{% endif %}
